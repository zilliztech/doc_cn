---
id: "release_notes_0.4.0"
lang: "cn"
title: "0.5.0 发布说明"
label1: "发布说明"
---
# 0.5.0 发布说明


## 概述
ZILLIZ Analysis 0.5.0于2019年11月30日发布，相较 0.4.0 版本，重要改进如下：

- 新增存储引擎的适配层，当前已支持对 kudu 的适配。
- 采用基于 Apache Arrow 的内存数据对象管理。
- 新增 GPU 加速的 CSV 文件导入机制。
- 新增图表样式。
- 完善异常处理机制，提高系统稳定性。
- 提升计算、渲染算子的性能。

## Infini 可视化交互分析界面

### 系统配置与组件

- 支持导入/导出/删除配置文件。
- 新增 favicon 系统。
- 升级 React 到16.10。

### 仪表盘与图表

- 优化多图渲染性能。
- 新增选中和非选中数据点的数量统计。
- 新增气泡图。
- 新增直方图。
- 新增饼图数据变化动画效果。
- 新增线图数据变化动画效果。
- 新增条形图数据变化动画效果。
- 全新热力图渲染样式。
- 点地图新增查看当前点全部数据。

### 图表编辑器

- 点地图增加4种渐变色，并增加渐变色数值标尺。
- 新增自定义纬度。
- 新增自定义计量。
- 折线图新增对文本类型数据列的防卡死机制。如果文本数据列大于10，折线图默认只显示前10条数据列。


## MegaWise 数据分析引擎

### 系统配置

- 提供统一的配置文件，支持用户对系统的自定义配置。

### 数据接口

- 新增对 kudu 存储引擎的适配。
- 新增 GPU 加速的 CSV 文件导入机制。

### SQL执行引擎

- 完善对 const 查询语句的支持。
- 完善异常处理机制，包括：
    - 在运算任务执行异常的状态下即时终止 query 并回收资源；
    - 完善功能边界检查，对于当前不支持的 SQL 语句，增强提示信息。
- 改进 hash join 算法，优化显存使用量。
- 新增打印 codegen plan 的功能。
- 新增对 extract quarter 的支持。

### 内存管理

- 采用基于 Apache Arrow 的内存数据对象管理。

## Picasso 图形渲染引擎

- 新增数据渲染类型，包括

    - layer\_weighted\_pointsize\_circles\_2d: 大小可变,颜色不变的带权二维散点图

- 优化热力图渲染速度

## Bug 修复

- 1000419         解决了 sort 结点抛异常的缺陷。
- 1000417         解决了执行处理0行数据 query 时发生异常的缺陷。
- 1000414         解决了 pointmap 上有数据，使用多边形选取后，点状图中的点消失的缺陷。
- 1000411         解决了对字符串做 avg 操作时 ERROR: rc=stoll 的缺陷。
- 1000405         暂缓了 docker 重启之后表中的数据没有了，但是表还在的行为不一致的问题。
- 1000399         解决了字符串等号比较失败的缺陷。
- 1000395         解决了 grpc server shutdown 流程不正确导致的 megawise\_server 结束时端错误的缺陷。
- 1000384         解决了组织结果时对 string 错误处理导致的 substring error 缺陷。
- 1000379         解决了执行 meta 信息未针对数据类型处理导致的 multifragment engine 的缺陷。
- 1000368         解决了 cosmo copy from csv 有 header 情况下读取行数不对应的缺陷。
- 1000366         解决了 engine 对 boolean expr 错误处理导致的 boolean error 的缺陷。
- 1000365         解决了子查询结果集数量返回为0时，plot_scatter\_2d 出图函数报错的缺陷。
- 1000337         解决了 pg 编译过程错误导致的 \d error 的缺陷。
- 1000335         解决了因 arrow\_cuda.a 错误链接导致的 chewie client 退出时端错误的缺陷。
- 1000334         解决了 temp table error 的缺陷。
- 1000330         解决了 docker 版本 MegaWise 无法处理 stop 信号 的缺陷。
- 1000328         解决了 docker 版 MegaWise 关闭时，未能正常清除 /tmp/.s.PGSQL.5432，导致下次启动失败的缺陷。
- 1000327         解决了 ubuntu 18.04 下，pg\_ctl 无法启动的缺陷。
- 1000326         解决了 cosmo load_from csv 接口第二次调用 grpc 消息丢失的缺陷。
- 1000298         解决了因绘图算法不一致导致的 gis 测试过不了的问题。
- 1000293         解决了了因编译 gtest 错误导致的单元测试无法编译的缺陷。
- 1000167         解决了因 x-server 依赖导致的 GIS 系统不稳定的缺陷。
- 1000336         解决了 distance\_in\_meters 在某些状态写无法执行进而抛出异常的缺陷。
- 1000453         修复在多边形选中状态下点击选择多边形报错的问题。
- 1000454         修复线图在多条线数据不整齐的情况下，tooltip 定位不准确的问题。
- 1000455         修正点地图点选时颜色不正确的问题。
- 1000456         修正 SQL 解析器多条 OR 条件生成 SQL 不正确的问题。
- 1000456         修复了数字图文字大小自适应的缺陷。
- 1000415         优化了特定 SQL 的执行流程，解决了特定热力图 SQL 出图时间超长的缺陷。
- 1000425         解决了点图 color palette 的选择和实际着色不一致的缺陷。
- 1000410         解决了 GeoHeatMap 中，measure 中选 AVG(passenger_count) 时，出图为方形的缺陷。
- 1000323         修复了结果集为空或者结果集中有 const 表达式时的显存泄露的缺陷。
- 1000451         修复 hash join 在多卡下的调度错误。
- 1000452         修复 hash 结点在大数据时任务创建的错误。
- 1000443         修复了中间结果为0行时，hash 结点未能创建 task 的缺陷。
